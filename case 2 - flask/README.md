# Улучшенное Flask-приложение для управления заданиями

Это улучшенная версия Flask-приложения для управления заданиями пользователей. Приложение позволяет создавать пользователей, добавлять задания с прикрепленными изображениями, получать свободные задания и вести учет созданных заданий.

## Основные улучшения

- Улучшенная безопасность: проверка прав доступа, валидация входных данных
- Оптимизированные запросы к базе данных
- Корректная обработка ошибок и исключений
- Безопасная работа с файлами изображений
- Поддержка различных форматов изображений
- Правильные HTTP-статусы и информативные сообщения об ошибках

## Запуск приложения через Docker

### Предварительные требования

- Docker
- Docker Compose

### Шаги для запуска

1. Клонируйте репозиторий:
   ```bash
   git clone <repository-url>
   cd <repository-directory>/case\ 2\ -\ flask/
   ```

2. Соберите и запустите контейнеры:
   ```bash
   docker-compose up -d --build
   ```

3. Приложение будет доступно по адресу: `http://localhost:5000`

## API Endpoints

### Пользователи

- `POST /users` - Создание пользователя
  ```json
  {
    "email": "user@example.com"
  }
  ```

- `DELETE /users/:user_id` - Удаление пользователя

### Задания

- `GET /tasks` - Получение списка заданий пользователя
- `POST /tasks` - Создание задания
  ```json
  {
    "meta": "Метаинформация о задании",
    "image": "base64-encoded-image"
  }
  ```
- `GET /tasks/:task_id` - Получение информации о задании
- `GET /tasks/:task_id/image` - Получение изображения задания
- `DELETE /tasks/:task_id` - Удаление задания

### Дополнительные функции

- `GET /take_free_task` - Получение свободного задания
- `GET /total_tasks_created` - Получение общего количества созданных заданий

## Аутентификация

Для всех запросов (кроме создания пользователя) требуется передавать параметр `user_id` в query string:

```
GET /tasks?user_id=1
```

## Остановка приложения

```bash
docker-compose down
```

Для полной очистки (включая тома с данными):
```bash
docker-compose down -v
``` 